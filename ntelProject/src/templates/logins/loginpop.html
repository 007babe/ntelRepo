{#################################}
{% load staticfiles %}
{#################################}
<div class="modal-dialog">
    <div class="modal-content">
        <!-- header Start -->
        <div class="modal-header p-header">
            <!-- 닫기(x) 버튼 Start -->
            <button id="btnDialogClose" type="button" class="close" data-dismiss="modal">×</button>
            <!-- 닫기(x) 버튼 End -->
            <!-- header title Start -->
            <h3 class="font-bold">오랜시간 사용하지 않아 다시 로그인이 필요합니다.</h3>
            <!-- header title End -->
        </div>
        <!-- header End -->        
        <!-- body Start -->
        <div class="modal-body p-body">
            <div class="ibox-content" style="padding:5px 5px 5px 5px;">
                <div class="error-desc">
                    <form id="frmLogin" name="frmLogin" action="." method="post" class="form-horizontal" style="margin: 0 auto; max-width: 360px;">
                        {% csrf_token %}
                        <div class="form-group">
                            <input name="userId" id="userId" type="text" class="form-control" placeholder="사용자ID" required>
                        </div>
                        <div class="form-group">
                            <input name="password" id="password" type="password" class="form-control" placeholder="비밀번호" required>
                        </div>
                        <button type="submit" class="btn btn-primary block full-width m-b" value="로그인">로그인</button>
                    </form>
                </div>
            </div>
        </div>
        <!-- body End -->
        <!-- Footer Start -->
        <div class="modal-footer p-footer">
            <span>
                <button type="button" class="form-btn form-btn-n" style="width: 60px;" data-dismiss="modal">닫기</button>
            </span>
        </div>
        <!-- Footer End -->
    </div>
</div>
        



<!-- Javascript Local Code Start -->
<script>
$(document).ready(function() {
	// 로그인 처리
    $("#frmLogin").submit(function(e, params) {
        event.preventDefault();
        
        alert("hahaah");

        var _this = $(this);
        // Ajax 처리
        $.ajax({
            type: "POST",
            url: "{% url 'logins:logincheck' %}" ,
            data: _this.serializeArray(),    	
            async: true,
            beforeSend: function (jqXHR, settings) {
            },
            success: function(data, cbFunc) {
            	var resultCode = data["resultCode"]; 
            	var msg = data["msg"]; 

            	// 정상로그인
            	if(resultCode == "IL0000") {
            		// 로그인 팝업창 닫기
            		$("#btnDialogClose").trigger("click");
            		$.gfAjaxSetup();
            	} else {
            		// 팝업 메시지 처리
            		$.gfNotiMsgSvr({
            			msgCd : resultCode,
            			msgType : "warning",
            		    title : "로그인 실패",
            		    msg : msg
            		});
            	}
            },
            error: function(xhr, ajaxOptions, throwError) {
        		$.gfNotiMsgSvr({
        			msgCd : "",
        			msgType : "warning",
        		    title : "시스템 오류",
        		    msg : "시스템 오류 입니다. 관리자에게 문의하세요."
        		});
            },
            statusCode: {
                404: function() {
    /*
                    $.gfCommonPopUp({
                        popUrl: "{% static '/error/popup404.html' %}",
                        width : "300"
                    });
    */
                }
            }
        }).done(function() { // 성공할 경우
//            console.log("gfLogin Ajax done key[" + key + "],url[" + url + "],cbFunc[" + cbFunc + "]");
        }).fail(function() { // 실패할 경우
//            console.log("gfLogin Ajax fail key[" + key + "],url[" + url + "],cbFunc[" + cbFunc + "]");
        }).always(function() {
//            console.log("gfLogin Ajax allways key[" + key + "],url[" + url + "],cbFunc[" + cbFunc + "]");
        });
		return false;
    });
});
</script>
<!-- Javascript Local Code End -->
</html>
